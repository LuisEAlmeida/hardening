"use strict";(self.webpackChunkhardening=self.webpackChunkhardening||[]).push([[7338],{697:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"documentacion/ejemplos/6.2.2/6.2.2.1.2","title":"6.2.2.1.2","description":"6.2.2.1.2 Asegurar que la autenticaci\xf3n de systemd-journal-upload est\xe9 configurada (Manual)","source":"@site/docs/documentacion/ejemplos/6.2.2/6.2.2.1.2.md","sourceDirName":"documentacion/ejemplos/6.2.2","slug":"/documentacion/ejemplos/6.2.2/6.2.2.1.2","permalink":"/hardening/docs/documentacion/ejemplos/6.2.2/6.2.2.1.2","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Torre Unix","permalink":"/hardening/docs/tags/torre-unix"},{"inline":true,"label":"IST","permalink":"/hardening/docs/tags/ist"}],"version":"current","sidebarPosition":3,"frontMatter":{"title":"6.2.2.1.2","tags":["Torre Unix","IST"],"sidebar_position":3},"sidebar":"documentacionSidebar","previous":{"title":"6.2.2.1","permalink":"/hardening/docs/documentacion/ejemplos/6.2.2/6.2.2.1"},"next":{"title":"6.2.2.1.3","permalink":"/hardening/docs/documentacion/ejemplos/6.2.2/6.2.2.1.2 copy"}}');var r=n(4848),a=n(8453);const l={title:"6.2.2.1.2",tags:["Torre Unix","IST"],sidebar_position:3},d=void 0,t={},c=[{value:"6.2.2.1.2 Asegurar que la autenticaci\xf3n de systemd-journal-upload est\xe9 configurada (Manual)",id:"62212-asegurar-que-la-autenticaci\xf3n-de-systemd-journal-upload-est\xe9-configurada-manual",level:2},{value:"Aplicabilidad del perfil:",id:"aplicabilidad-del-perfil",level:3},{value:"Descripci\xf3n:",id:"descripci\xf3n",level:3},{value:"Justificaci\xf3n:",id:"justificaci\xf3n",level:3},{value:"Auditor\xeda:",id:"auditor\xeda",level:3},{value:"Remediaci\xf3n:",id:"remediaci\xf3n",level:3},{value:"Referencias",id:"referencias",level:3},{value:"Controles CIS",id:"controles-cis",level:2},{value:"Mapeo de MITRE ATT&amp;CK",id:"mapeo-de-mitre-attck",level:2}];function o(e){const i={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"62212-asegurar-que-la-autenticaci\xf3n-de-systemd-journal-upload-est\xe9-configurada-manual",children:"6.2.2.1.2 Asegurar que la autenticaci\xf3n de systemd-journal-upload est\xe9 configurada (Manual)"}),"\n",(0,r.jsx)(i.h3,{id:"aplicabilidad-del-perfil",children:"Aplicabilidad del perfil:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Nivel 1 - Servidor"}),"\n",(0,r.jsx)(i.li,{children:"Nivel 1 - Estaci\xf3n de trabajo"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"descripci\xf3n",children:"Descripci\xf3n:"}),"\n",(0,r.jsxs)(i.p,{children:["Journal ",(0,r.jsx)(i.strong,{children:"systemd-journal-upload"})," admite la capacidad de enviar eventos de registro que recopila a un host de registro remoto."]}),"\n",(0,r.jsx)(i.h3,{id:"justificaci\xf3n",children:"Justificaci\xf3n:"}),"\n",(0,r.jsx)(i.p,{children:"Almacenar datos de registro en un host remoto protege la integridad de los registros contra ataques locales. Si un atacante obtiene acceso root en el sistema local, podr\xeda manipular o eliminar datos de registro almacenados en el sistema local."}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsxs)(i.p,{children:["\u2139 ",(0,r.jsx)(i.strong,{children:"Nota:"})," Esta recomendaci\xf3n ",(0,r.jsx)(i.strong,{children:"solo aplica si journald es el m\xe9todo elegido para el registro del cliente"}),". No aplique esta recomendaci\xf3n si se utiliza ",(0,r.jsx)(i.strong,{children:"rsyslog"}),"."]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"auditor\xeda",children:"Auditor\xeda:"}),"\n",(0,r.jsxs)(i.p,{children:["Ejecute el siguiente comando para verificar que la autenticaci\xf3n de ",(0,r.jsx)(i.strong,{children:"systemd-journal-upload"})," est\xe1 configurada:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:'grep -P "^ *URL=|^ *ServerKeyFile=|^ *ServerCertificateFile=|^ *TrustedCertificateFile=" /etc/systemd/journal-upload.conf\n'})}),"\n",(0,r.jsx)(i.p,{children:"Verifique que la salida coincida con las ubicaciones de los certificados de su entorno y la URL del servidor de registros:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"[Upload] \r\nURL=192.168.50.42\r\nServerKeyFile=/etc/ssl/private/journal-upload.pem\r\nServerCertificateFile=/etc/ssl/certs/journal-upload.pem\r\nTrustedCertificateFile=/etc/ssl/ca/trusted.pem\n"})}),"\n",(0,r.jsx)(i.h3,{id:"remediaci\xf3n",children:"Remediaci\xf3n:"}),"\n",(0,r.jsxs)(i.p,{children:["Edite el archivo ",(0,r.jsx)(i.code,{children:"/etc/systemd/journal-upload.conf"})," o un archivo en",(0,r.jsx)(i.br,{}),"\n",(0,r.jsx)(i.code,{children:"/etc/systemd/journal-upload.conf.d"})," con la extensi\xf3n ",(0,r.jsx)(i.code,{children:".conf"})," y aseg\xfarese de que las siguientes l\xedneas est\xe9n configuradas en la secci\xf3n ",(0,r.jsx)(i.code,{children:"[Upload]"})," seg\xfan su entorno:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"[Upload]\r\nURL=192.168.50.42\r\nServerKeyFile=/etc/ssl/private/journal-upload.pem\r\nServerCertificateFile=/etc/ssl/certs/journal-upload.pem\r\nTrustedCertificateFile=/etc/ssl/ca/trusted.pem\n"})}),"\n",(0,r.jsx)(i.p,{children:"Reiniciar el servicio:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"systemctl restart systemd-journal-upload\n"})}),"\n",(0,r.jsx)(i.h3,{id:"referencias",children:"Referencias"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"NIST SP 800-53 Rev. 5: AU-2, AU-12"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"controles-cis",children:"Controles CIS"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Versi\xf3n"}),(0,r.jsx)(i.th,{children:"Control"}),(0,r.jsx)(i.th,{children:"IG 1"}),(0,r.jsx)(i.th,{children:"IG 2"}),(0,r.jsx)(i.th,{children:"IG 3"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"v8"})}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.strong,{children:"8.2 Recopilar registros de auditor\xeda"}),": Recopile registros de auditor\xeda. Aseg\xfarese de que el registro, seg\xfan el proceso de gesti\xf3n de registros de auditor\xeda de la empresa, se haya habilitado en todos los activos empresariales."]}),(0,r.jsx)(i.td,{children:"\ud83d\udfe2"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe0"}),(0,r.jsx)(i.td,{children:"\ud83d\udd35"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"v7"})}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.strong,{children:"6.2 Activar el registro de auditor\xeda"}),": Aseg\xfarese de que el registro local se haya habilitado en todos los sistemas y dispositivos de red."]}),(0,r.jsx)(i.td,{children:"\ud83d\udfe2"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe0"}),(0,r.jsx)(i.td,{children:"\ud83d\udd35"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"v7"})}),(0,r.jsxs)(i.td,{children:[(0,r.jsx)(i.strong,{children:"6.3 Habilitar el registro detallado"}),": Habilite el registro del sistema para incluir informaci\xf3n detallada, como la fuente del evento, fecha, usuario, marca de tiempo, direcciones de origen, direcciones de destino y otros elementos \xfatiles."]}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"\ud83d\udfe0"}),(0,r.jsx)(i.td,{children:"\ud83d\udd35"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"mapeo-de-mitre-attck",children:"Mapeo de MITRE ATT&CK"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"T\xe9cnicas / Subt\xe9cnicas"}),(0,r.jsx)(i.th,{children:"T\xe1cticas"}),(0,r.jsx)(i.th,{children:"Mitigaciones"})]})}),(0,r.jsx)(i.tbody,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"T1070, T1070.002, T1562, T1562.006"}),(0,r.jsx)(i.td,{children:"TA0040"}),(0,r.jsx)(i.td,{children:"M1029"})]})})]})]})}function u(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>d});var s=n(6540);const r={},a=s.createContext(r);function l(e){const i=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(a.Provider,{value:i},e.children)}}}]);